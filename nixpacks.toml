# Nixpacks configuration for Railway
# This ensures canvas library dependencies are installed

[phases.setup]
nixPkgs = ["nodejs_20", "npm"]

[phases.install]
cmds = [
  "apt-get update",
  "apt-get install -y libcairo2-dev libpango1.0-dev libjpeg-dev libgif-dev librsvg2-dev",
  "npm ci --legacy-peer-deps"
]

[phases.build]
cmds = ["prisma generate && npm run build"]

[phases.start]
cmd = "npm start"

